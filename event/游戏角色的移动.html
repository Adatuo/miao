<!DOCTYPE html>
<!-- saved from url=(0111)https://class.damiaoedu.com:44313/codes/js/%E6%B8%B8%E6%88%8F%E8%A7%92%E8%89%B2%E7%9A%84%E7%A7%BB%E5%8A%A8.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div class="box" style="position: fixed; background-color: red; width: 50px; height: 50px; left: 224px; top: 0px;"></div>
  <script>

    var box = document.querySelector('.box')

    var vx = 0 // 水平方向的速度
    var vy = 0 // 垂直方向的速度
    var speed = 2

    requestAnimationFrame(function ani() {
      box.style.left = parseFloat(box.style.left) + vx * speed + 'px'
      box.style.top = parseFloat(box.style.top) + vy * speed + 'px'

      requestAnimationFrame(ani)
    })

    var ArrowLeftPressing = false
    var ArrowRightPressing = false

    window.addEventListener('keydown', e => {

      if (e.key == 'Shift') {
        speed = 4
      } else if (e.key == 'ArrowRight') {
        vx = 1
        ArrowRightPressing = true
      } else if (e.key == 'ArrowLeft') {
        vx = -1
        ArrowLeftPressing = true
      }
      
      console.log(vx, vy)
    })
    window.addEventListener('keyup', e => {
      if (e.key == 'Shift') {
        speed = 2
      } else if (e.key == 'ArrowRight') {
        ArrowRightPressing = false
        if (ArrowLeftPressing) {
          vx = -1
        } else {
          vx = 0
        }
      } else if (e.key == 'ArrowLeft') {
        ArrowLeftPressing = false
        if (ArrowRightPressing) {
          vx = 1
        } else {
          vx = 0
        }
      }
      console.log(vx, vy)
    })
  </script>

</body></html>