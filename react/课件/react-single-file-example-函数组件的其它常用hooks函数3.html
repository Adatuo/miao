
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Hello World</title>
    <script src="react.development.js"></script>
    <script src="react-dom.development.js"></script>

    <!-- Don't use this in production: -->
    <script src="babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

  </head>
  <body>
    <div id="root"></div>
    <script type="text/babel" data-presets="react">
      var { useState, useCallback, useEffect, memo, useRef, useMemo, useId, useReducer, useLayoutEffect } = React

      // è¢«React.memoåŒ…è£¹çš„ç»„ä»¶ï¼Œå¦‚æœæ–°ä¼ å…¥çš„propsæ²¡æœ‰å‘ç”Ÿå˜åŒ–
      // åˆ™ä¸æ›´æ–°ç»„ä»¶
      var Button = memo(function Button(props) {
        console.log('Button render')
        var {children, className, ...restProps} = props
        return <button {...restProps} className={`border p-1 rounded text-white bg-slate-500 ${className}`}>{children}</button>
      })


      function isEqual(obj1, obj2) {
        for (var key in obj1) {
          if (obj1[key] !== obj2[key]) {
            return false
          }
        }
        return true
      }

      var map = {
        heart: 'ğŸ’•',
        star: 'â­',
        smile: 'ğŸ˜Š'
      }
      function Icon({ iconName }) {
        return <i className="font-normal">{map[iconName] ?? 'error'}</i>
      }

      function Checkbox({ label, ...restProps }) {
        var id = useId()

        return (
          <div>
            <input id={'cb-' + id} type="checkbox" {...restProps} /> <label htmlFor={'cb-' + id}>{label}</label>
          </div>
        )
      }

      // forwardRefè¿”å›çš„ç»„ä»¶æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨æ¥è½¬å‘refçš„ç»„ä»¶ï¼Œæ‰€ä»¥å«forwardï¼ˆè½¬å‘ï¼‰ref
      // ç‰¹å¤§å–œè®¯ï¼react 19é‡Œé¢ï¼ŒforwardRefæ²¡æœ‰äº†ï¼Œæ‰€æœ‰çš„å‡½æ•°ç»„ä»¶è‡ªåŠ¨æ‹¥æœ‰è½¬å‘refçš„èƒ½åŠ›
      function MyInput(props, ref) {
        debugger
        var inputRef = useRef()
        var [count, setCount] = useState(0)

        React.useImperativeHandle(ref, () => {
          return {
            focus() {
              inputRef.current.focus()
            },
            foo() {

            },
            getCount() {
              return count
            },
            setFoo(v) {
              
            }
          }
        }, [])

        // function useImperativeHandle(ref, factory, deps) {
        //   useMemo(() => {
        //     ref.current = factory()
        //   }, deps)
        // }

        // expose.current = {
        //   focus() {
        //     ref.current.focus()
        //   },
        //   foo() {

        //   },
        //   getCount() {

        //   },
        //   setFoo(v) {
            
        //   }
        // }

        return <input ref={inputRef} {...props} />
      }

      function MyApp() {
        var ref = useRef()
        console.log(ref)
        
        // ref.current.focus()

        return (
          <div>
            <MyInput ref={ref} />

            <Checkbox  label="ä¿æŒç™»é™†" />
            <Checkbox  label="è®°ä½æˆ‘" />


           <Icon name="smile" />
            <Icon name="heart" />

            <Button id="foo" title="owe" onClick={ () => console.log(1) }>
              hello
              <span>we<i>i</i>jf</span>
            </Button>
          </div>
        )
      }

      const container = document.getElementById('root')
      const root = ReactDOM.createRoot(container)
      root.render(<MyApp />)

    </script>
  </body>
</html>